function maskPhone(){const e=document.querySelectorAll('[type="tel"]');function t(e){if(!e)return"";"7"!==e[0]&&"8"!==e[0]&&(e="7"+e);const t="8"===e[0]?"8 (___) ___ ____":"+7 (___) ___ ____";let n=0,s="";for(const i of t){if(n>=e.length)break;"_"===i||/\d/.test(i)?s+=e[n++]:s+=i}return s}e.forEach(e=>{const n=e.placeholder;e.addEventListener("focus",function(){this.value||(this.value="+7 (",this.placeholder=""),setTimeout(()=>{this.setSelectionRange(this.value.length,this.value.length)},0)}),e.addEventListener("input",function(e){const n="deleteContentBackward"===e.inputType;const s=this.value.replace(/\D/g,"");if(n)return;let i=t(s);this.value=i,setTimeout(()=>{const e=this.value.indexOf("_");!function(e,t){e.setSelectionRange(t,t)}(this,-1===e?this.value.length:e)},0)}),e.addEventListener("blur",function(){("+7 ("===this.value||this.value.length<5)&&(this.value="",this.placeholder=n)}),e.addEventListener("paste",function(e){e.preventDefault();let n=(e.clipboardData||window.clipboardData).getData("text");n=n.replace(/\D/g,""),this.value=t(n)}),e.addEventListener("change",function(){const t=e.closest("form")?.querySelector('[type="submit"]');if(!t)return;const n=this.value.startsWith("8")?16:18;this.value.length<n?(t.setAttribute("disabled",!0),this.classList.add("error")):(t.removeAttribute("disabled"),this.classList.remove("error"))})})}window.addEventListener("DOMContentLoaded",()=>{maskPhone()});